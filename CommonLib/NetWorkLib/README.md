# 网络状态基础工具库
#### 目录介绍
- 01.基础概念介绍
- 02.常见思路和做法
- 03.Api调用说明
- 04.遇到的坑分析
- 05.其他问题说明



### 01.基础概念说明
#### 1.1 检查设备网络连接
- 设备可以有多种类型的网络连接
    - Wi-Fi 速度通常较快。此外，移动数据通常按流量计费，费用可能很高。应用采取的一种常见策略是仅在 Wi-Fi 网络可用时获取大型数据。
    - 在执行网络操作之前，最好先检查网络连接的状态。比如，这可以防止您的应用无意间使用错误的无线装置。
- 检查网络连接，通常使用以下类
    - ConnectivityManager：回应关于网络连接状态的查询。当网络连接发生变化时，它还会通知应用。
    - NetworkInfo：描述指定类型的网络接口的状态（目前为移动网络或 Wi-Fi）。



#### 1.2 判断是否连接
- 如何判断是否连接
    - 调用api如下所示：networkInfo.isConnected()。
- 举一个简单例子
    - 你连接了A网络Wi-Fi，但是无法使用网络，有可能连接上了但是没有验证身份导致网络不可用。




#### 1.3 判断是否可用
- 如何判断是否连接
    - 调用api如下所示：networkInfo.isAvailable()。
- 举一个简单例子
    - 你连接了A网络Wi-Fi，但是无法使用网络，然后你使用验证码验证后，网络可以访问百度了。此时才是网络可用状态。



#### 1.4 获取默认网络
- 如何获取默认网络
    - 调用api如下所示：manager.getActiveNetworkInfo()，获取默认网络NetworkInfo
    - 调用api如下所示：manager.getActiveNetwork()，获取默认网络Network
- 如何获取默认网络类型
    - 通过AppNetworkUtils.getNetworkType()即可获取当前的网络类型【多网络存在下也可以】
    - 经过：registerDefaultNetworkCallback 注册默认网络回调可以发现，获取默认网络是正确的。




#### 1.5 如何检查以太网
- 在Android提供的"设置"菜单中有"以太网连接选项"，从中可以配置设备的以太网连接。
    - 为了检查以太网连接状态，我们读取系统文件" / sys / class / net / eth0"，该文件可以返回正确的以太网状态
- 错误的方式，网络上有一些用getNetworkInfo检测以太网
    - connectMgr.getNetworkInfo(ConnectivityManager.TYPE_ETHERNET)。这种方式是不可行的。
    - NetworkInfo：描述指定类型的网络接口的状态（目前为移动网络或 Wi-Fi）。



### 02.常见思路和做法



### 03.Api调用说明



### 04.遇到的坑分析
#### 4.1 网络可用判断的坑
- 不应根据网络是否“可用”做决定
    - 在执行网络操作之前，您应始终检查 isConnected()，因为 isConnected() 会处理不稳定的移动网络、飞行模式和后台数据受限等情况。




### 05.其他问题说明




